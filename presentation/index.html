<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Docker</title>

        <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
        <meta name="author" content="Hakim El Hattab">

        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/sd_custom.css">
        <link rel="stylesheet" href="css/theme/docker.css" id="theme">
        <link rel="stylesheet" href="lib/css/docker-code.css">

        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->

        <style>
            .small-p {
                font-size: 20px !important;
            }

            .source {
                font-size: 0.7em !important;
                font-style: italic !important;
            }

            .source-full {
                font-size: 0.7em !important;
                font-style: italic !important;
                position: fixed !important;
                bottom: -320px !important;
                left: 10px !important;
            }
        </style>
    </head>

    <body>
        <img src="images/docker_logo_flat.png" style="width: 50px; height: auto; position: fixed; bottom: 30px; left: 30px; z-index: 9999;" alt="docker logo">
        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section data-background="images/title_slide_dockercon2016.png" class="blue_bg">
                    <h2>What is <a href="https://www.docker.com">Docker</a>?</h2>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Agenda</h2>   
                    <ul>
                        <li>Why containers?</li>
                        <li>What is Docker?</li>
                        <li>The Docker fundamentals
                            <ul>
                                <li>Architecture</li>
                                <li>Images, Container & Layers</li>
                                <li>Dockerfile</li>
                                <li>Using <code>docker</code> command</li>
                            </ul>
                        </li>
                        <li>Registry</li>
                        <li>Volumes</li>
                        <li>Networking</li>
                        <li>Service</li>
                        <li>The world around of Docker</li>
                    </ul>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Run this cotainer</h2>   
                    <pre>$ docker run -ti --rm -v /var/run/docker.sock:/var/run/docker.sock -p 57575:57575 -p 3000:3000 furikuri/docker-workshop
                    </pre>
                </section>  

                <section data-background="#445d6e" class="blue_bg">
                    <h2>The Challenge</h2>
                    <div style="background-color:#ffffff; padding: 10px;">
                        <img src="images/the-challenge.png" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#445d6e" class="blue_bg">
                    <h2>The Matrix from Hell</h2>
                    <div style="background-color:#ffffff; padding: 10px;">
                        <img src="images/the-matrix-from-hell.png" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#445d6e" class="blue_bg">
                    <h2>Cargo Transport Pre-1960</h2>
                    <div style="background-color:#ffffff; padding: 10px;">
                        <img src="images/cargo-transport-pre-1960.png" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#445d6e" class="blue_bg">
                    <h2>Also a Matrix from Hell</h2>
                    <div style="background-color:#ffffff; padding: 10px;">
                        <img src="images/also-a-matrix-from-hell.png" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#445d6e" class="blue_bg">
                    <h2>Solution: Intermodal Shipping Container</h2>
                    <div style="background-color:#ffffff; padding: 10px;">
                        <img src="images/intermodal-shipping-container.png" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#445d6e" class="blue_bg">
                    <h2>Docker is a Container System for Code</h2>
                    <div style="background-color:#ffffff; padding: 10px;">
                        <img src="images/shipping-container-for-code.png" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#445d6e" class="blue_bg">
                    <h2>Docker Eliminates the Matrix from Hell</h2>
                    <div style="background-color:#ffffff; padding: 10px;">
                        <img src="images/eliminates-matrix-from-hell.png" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="images/container_ship.jpg" class="blue_bg">
                    <h2>Containership + Harbour = Docker?</h2>
                    <span class="source-full">source: <a href="flickr.com/28169156@N03/26075913423">flickr.com/28169156@N03/26075913423</a> <a href="https://creativecommons.org/licenses/by-nc-nd/2.0/">(cc)</a></span>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Benefits</h2>
                    <ul>
                        <li>Same environment</li>
                        <li>Sandbox projects</li>
                        <li>It just works!</li>
                    </ul>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <div style="background-color:#1AAAF8; padding: 10px;  float: left; width: 48%;">
                        <img src="images/WhatIsDocker_2_VMs_0-2_2.png" height="300" style="background: #1AAAF8">
                        <h3>VIRTUAL MACHINES </h3>
                        <p class="small-p">Virtual machines include the application, the necessary binaries and libraries, and an entire guest operating system -- all of which can amount to tens of GBs.</p>
                    </div>
                    <div style="background-color:#1AAAF8; padding: 10px; float: left; width: 48%;">
                        <img src="images/WhatIsDocker_3_Containers_2_0.png" height="300" style="background: #1AAAF8">
                        <h3>CONTAINERS </h3>
                        <p class="small-p">Containers include the application and all of its dependencies --but share the kernel with other containers, running as isolated processes in user space on the host operating system. Docker containers are not tied to any specific infrastructure: they run on any computer, on any infrastructure, and in any cloud.</p>
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <div style="background-color:#254356; padding: 10px;">
                        <iframe class="demo" style="height: 586px; width: 100%; max-width: 100%; max-height: 100%; margin-left: 0px; padding: 10px; overflow:hidden;"></iframe>
                    </div>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Docker</h2>
                    <ul>
                        <li>"Docker is the world's leading software containerization platform" - docker.com</li>
                        <li>Open Source</li>
                        <li>March 2013, dotCloud => Docker Inc.</li>
                        <li>Written in Go</li>
                        <li>Version 1.12</li>
                        <li>35,837 Stars; 14,484 Closed PR; 8,253 Contributors</li>
                        <li>$120 million venture capital</li>
                    </ul>
                </section>

                <section data-background="#445d6e" class="blue_bg">
                    <h2>Octoverse 2016</h2>
                    <iframe src="https://octoverse.github.com/" style="height: 520px; width: 110%; max-width: 110%; max-height: 100%; margin-left: -60px; overflow:hidden;"></iframe>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Architecture</h2>
                    <ul>
                        <li>Docker daemon</li>
                        <li>Docker client</li>
                        <li>Docker registry</li>
                    </ul>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Underlying technologies</h2>
                    <ul>
                        <li>
                            cgroups
                            <ul>
                                <li>CPU</li>
                                <li>Memory</li>
                                <li>Freezing</li>
                                <li>Unfreezing</li>
                            </ul>
                        </li>
                        <li>
                            namespaces
                            <ul>
                                <li>Isolation (e.g. filesystem, users, networking, processes)</li>
                            </ul>
                        </li>
                        <li>
                            Union File System (UFS)
                            <ul>
                                <li>Store layers</li>
                            </ul>
                        </li>
                    </ul>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Images, Layers & Containers</h2>
                    <div style="background-color:#ffffff; padding: 10px; text-align: center">
                        <img src="images/image-layers.jpg" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Images, Layers & Containers</h2>
                    <div style="background-color:#ffffff; padding: 10px; text-align: center">
                        <img src="images/container-layers-cas.jpg" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Images, Layers & Containers</h2>
                    <div style="background-color:#ffffff; padding: 10px; text-align: center">
                        <img src="images/shared-uuid.jpg" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>The Dockerfile</h2>   
                    <pre>
############################################################
# Dockerfile to build MongoDB container images
# Based on Ubuntu
############################################################

FROM ubuntu
MAINTAINER Example McAuthor
RUN apt-get update

################## BEGIN INSTALLATION ######################
# Install MongoDB Following the Instructions at MongoDB Docs
# Ref: http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/

RUN apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 7F0CEB10
RUN echo 'deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen' | tee /etc/apt/sources.list.d/mongodb.list
RUN apt-get update
RUN apt-get install -y mongodb-10gen
RUN mkdir -p /data/db
##################### INSTALLATION END #####################

EXPOSE 27017
CMD ["--port 27017"]
ENTRYPOINT usr/bin/mongod</pre>
                    <pre>$ docker build -t my_mongo .
$ docker run my_mongo</pre>
                </section>  

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>The build context</h2>   
                    <ul>
                        <li>Dockerfile + build context</li>
                        <li>
                            Build context = set of local files or directories
                            <ul>
                                <li>files + dir => tarball => Docker daemon</li>
                                <li>Can be referenced with ADD and COPY</li>
                                <li>.dockerignore</li>   
                            </ul>
                        </li>
                        <li>Dockerfile can also start with http or https</li>
                        <li>
                            Build context can also be a git repository
                            <ul>
                                <li>
                                    github.com/, _git@, _git://
                                </li>
                            </ul>
                        </li>
                        <li>docker build - < context.tar.gz</li>
                    </ul>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Caching</h2>   
                    <ul>
                        <li>Each layer will be cached</li>
                        <li>
                            Used for an instruction if
                            <ul>
                                <li>previous instruction was found in cache</li>
                                <li>there is a layer in the cache with same instruction and parent layer</li> 
                            </ul>
                        </li>
                        <li>ADD and COPY invalidated if checksum or metadata has changed</li>
                        <li>docker build --no-cache ...</li>
                    </ul>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Common Docker commands</h2>
                    <pre>
# Create and start container 
$ docker run -p 8080:8080 -d -v /host/dir:/container/dir --name my_container image-name

# Build image
$ docker build -f /path/to/Dockerfile -t my_image /path/to/build-context

# Managing container
$ docker stop/start/restart/kill &#x3C;container_name || container_id&#x3E;

# Container information
$ docker logs/inspect/history &#x3C;container_name || container_id&#x3E;

# Docker information
$ docker ps/top/images</pre>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <div style="background-color:#254356; padding: 10px;">
                        <iframe class="demo" style="height: 586px; width: 100%; max-width: 100%; max-height: 100%; margin-left: 0px; padding: 10px; overflow:hidden;"></iframe>
                    </div>
                </section>


                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Docker registry</h2>
                    <pre>$ docker pull ubuntu</pre>
                    <pre>$ docker pull registry-1.docker.io/distribution/registry:2.1</pre>
                    <ul>
                        <li>storage and content delivery system</li>
                        <li>available in different tagged versions</li>
                        <li><a href="https://hub.docker.com/explore/">Docker Hub</a></li>
                        <li><a href="https://store.docker.com/">Docker Store</a></li>
                    </ul>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Docker volumes</h2>
                    <ul>
                        <li>outside the UFS</li>
                        <li>normal directories on the host that are bind mounted</li>
                    </ul>
                    <pre>
$ docker run -it --name container-test -h CONTAINER -v /data debian /bin/bash
$ docker inspect -f {{.Volumes}} container-test

$ docker run -it --name container-test -h CONTAINER -v /home/theo/data:/data debian /bin/bash</pre>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Data volume containers</h2>
                    <ul>
                        <li>data share between containers</li>
                        <li>use from non-persistent containers</li>
                        <li>remove containers db1 and db2 => the volumes will not be deleted</li>
                    </ul>
                    <pre>
$ docker create -v /dbdata --name dbstore training/postgres /bin/true
$ docker run -d --volumes-from dbstore --name db1 training/postgres
$ docker run -d --volumes-from dbstore --name db2 training/postgres
$ docker run -d --volumes-from db1     --name db3 training/postgres</pre>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Docker network</h2>   
                    <h3>List network</h3>   
                    <pre>$ docker network ls</pre>
                    <h3>Inspect network</h3>   
                    <pre>$ docker network inspect bridge</pre>
                    <h3>Create network</h3>   
                    <pre>$ docker network create -d bridge my-bridge-network</pre>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Docker network</h2>
                    <ul>
                        <li>
                            bridge
                            <ul>
                                <li>default</li>
                                <li>great for dev</li>
                            </ul>
                        </li>
                        <li>
                            host
                            <ul>
                                <li>share network namespaces of the host</li>
                            </ul>
                        </li>
                        <li>
                            container
                            <ul>
                                <li>networking namespace from another container</li>
                                <li>preconfigured containers</li>
                            </ul>
                        </li>
                        <li>
                            none
                            <ul>
                                <li>turns off networking completely</li>
                            </ul>
                        </li>
                        <li>
                            overlay
                            <ul>
                                <li>VXLAN</li>
                                <li>conntect hosts with their own IP and NAT for external</li>
                            </ul>
                        </li>
                        <li>
                            Custom network plugin
                            <ul>
                                <li>flannel</li>
                                <li>weave</li>
                                <li>cannal</li>
                                <li>project calico</li>
                            </ul>
                        </li>
                    </ul>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Docker service</h2> 
                    <ul>
                        <li>part of Docker Swarm</li>
                    </ul>  
                    <pre>
# Create service
$ docker service create --name elasticsearch elasticsearch

# List all service
$ docker service ls

# List all tasks of a service
$ docker service ps elasticsearch

# Scale up/down
$ docker service update elasticsearch --replicas=10

# Remove service
$ docker service rm elasticsearch
                    </pre>
                </section>

                <section data-background="images/docker-animation.gif" class="blue_bg">
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Next steps</h2>   
                    <ul>
                        <li>Kubernetes</li>
                        <li>Docker Cloud</li>
                        <li>CoreOS</li>
                        <li>Mesosphere</li>
                        <li>ECS</li>
                        <li>Deis</li>
                        <li>Docker Swarm</li>
                        <li>Hyper.sh</li>
                        <li>...</li>
                    </ul>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Docker in production</h2>
                    <div style="background-color:#1AAAF8; text-align: center">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/PivpCKEiQOQ" frameborder="0" allowfullscreen></iframe>
                    </div>
                </section>

                <section data-background="#445d6e" class="blue_bg">
                    <h2>The Docker Survey 2016</h2>
                    <div style="background-color:#ffffff; text-align: center">
                        <img src="images/survey1.png" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#445d6e" class="blue_bg">
                    <h2>The Docker Survey 2016</h2>
                    <div style="background-color:#ffffff; text-align: center">
                        <img src="images/survey2.png" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#445d6e" class="blue_bg">
                    <h2>The Docker Survey 2016</h2>
                    <div style="background-color:#ffffff; text-align: center">
                        <img src="images/survey3.png" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#445d6e" class="blue_bg">
                    <h2>The Docker Survey 2016</h2>
                    <div style="background-color:#ffffff; text-align: center">
                        <img src="images/survey4.png" height="500">
                    </div>
                    <span class="source">source: <a href="https://www.docker.com">docker.com</a></span>
                </section>

                <section data-background="#1AAAF8" class="blue_bg">
                    <h2>Sources</h2>
                    <p>This slides based on the template of <a href="https://github.com/docker-training/docker-present">docker-training/docker-present</a>.</p>
                </section>

            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // More info https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                transition: 'slide', // none/fade/slide/convex/concave/zoom

                // More info https://github.com/hakimel/reveal.js#dependencies
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });

            function demoSlide(event) {
                var section = event.currentSlide || event;
                var elements = section.getElementsByClassName('demo');
                for (var i = 0; i < elements.length; i++) {
                    var demo = elements[i];
                    if (demo && !demo.src) {
                        demo.src = 'http://localhost:57575';
                    }
                };
            }

            Reveal.addEventListener('slidechanged', demoSlide);
            Reveal.addEventListener('ready', demoSlide);

        </script>

    </body>
</html>
